# Mosquitto MQTT Broker Configuration for Windows
# 安装路径: E:\Services\mosquitto
# 配置文件路径: E:\Services\mosquitto\mosquitto.conf

# ===========================================
# 网络监听配置
# ===========================================
# 监听所有网络接口的1883端口
listener 1883 0.0.0.0

# ===========================================
# 安全配置
# ===========================================
# 允许匿名连接（开发/测试环境）
# 生产环境建议设置为 false 并启用密码认证
allow_anonymous true

# 用户密码文件（如需启用认证，取消注释）
# password_file E:\Services\mosquitto\passwordfile
# allow_anonymous false

# ===========================================
# 数据持久化配置
# ===========================================
# 启用数据持久化
persistence true
# 持久化数据存储位置（Windows路径）
persistence_location E:\Services\mosquitto\data\

# ===========================================
# 日志配置
# ===========================================
# 日志输出到文件
log_dest file E:\Services\mosquitto\log\mosquitto.log

# 日志同时输出到控制台（调试用）
log_dest stdout

# 日志级别
log_type error
log_type warning
log_type notice
log_type information
log_type debug
log_type subscribe
log_type unsubscribe

# 日志时间戳
log_timestamp true
log_timestamp_format %Y-%m-%d %H:%M:%S

# ===========================================
# 性能优化配置
# ===========================================
# 最大客户端连接数
max_connections 1000

# 最大队列消息数
max_queued_messages 1000

# 消息大小限制（字节）
message_size_limit 10485760

# ===========================================
# WebSocket 配置（可选）
# ===========================================
# 如需支持WebSocket客户端，取消以下注释
# listener 9001 0.0.0.0
# protocol websockets

# ===========================================
# 保活配置
# ===========================================
# 客户端保活时间（秒）
max_keepalive 65535

# ===========================================
# 其他配置
# ===========================================
# 自动保存时间间隔（秒）
autosave_interval 300

# 是否保留最后遗愿消息
retained_persistence true

